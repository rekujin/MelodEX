# Swap Mix

Приложение для обмена музыкальными плейлистами, интегрированное с Яндекс.Музыкой, Spotify, SoundCloud.

## Требования

- Node.js (версия 18 или выше)
- npm (версия 9 или выше)
- Аккаунт в Supabase
- Аккаунт в Яндекс.Музыке
- Приложение в SoundCloud
- Приложение в Spotify

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/rekujin/MelodEX.git
cd swap-mix
```

2. Установите зависимости:
```bash
npm install
```

3. Создайте файл `.env` в корневой директории проекта:
```env
VITE_SUPABASE_URL=ваш_url_supabase
VITE_SUPABASE_ANON_KEY=ваш_ключ_supabase
YANDEX_MUSIC_TOKEN=ваш_токен_яндекс_музыки
SOUNDCLOUD_CLIENT_ID=ваш_саундклауд_client_id
SOUNDCLOUD_CLIENT_SECRET=ваш_саундклауд_client_secret
SPOTIFY_CLIENT_ID=ваш_спотифай_client_id
SPOTIFY_CLIENT_SECRET=ваш_спотифай_client_secret
```

## Разработка

### Запуск клиентской части

```bash
npm run dev
```
Приложение будет доступно по адресу: http://localhost:5173

### Запуск серверной части

```bash
npm run dev:server
```
Сервер будет запущен на порту 3000

### Запуск тестов

```bash
# Запуск всех тестов
npm test

# Запуск тестов в режиме наблюдения
npm run test:watch

# Запуск тестов с отчетом о покрытии
npm run test:coverage
```

### Линтинг

```bash
npm run lint
```

## Сборка для продакшена

```bash
npm run build
```

Собранные файлы будут находиться в директории `dist/`.

## Структура проекта

```
src/
├── api/          # API интеграции
├── assets/       # Статические ресурсы
├── components/   # React компоненты
├── context/      # React контексты
├── helper/       # Вспомогательные функции
├── hooks/        # Пользовательские хуки
├── pages/        # Страницы приложения
├── server/       # Серверная часть
└── utils/        # Утилиты
```

## API Документация

После запуска сервера, API документация доступна по адресу:
http://localhost:3000/api-docs

## Технологии

- Frontend:
  - React 19
  - React Router
  - Vite
  - Lucide React (иконки)

- Backend:
  - Express.js
  - Supabase
  - Яндекс.Музыка API

- Тестирование:
  - Jest
  - React Testing Library

## Скрипты

- `npm run dev` - Запуск клиентской части в режиме разработки
- `npm run dev:server` - Запуск серверной части в режиме разработки
- `npm run build` - Сборка проекта
- `npm run preview` - Предварительный просмотр собранного проекта
- `npm run test` - Запуск тестов
- `npm run lint` - Проверка кода линтером

## Развертывание

### Подготовка к развертыванию

1. Убедитесь, что все переменные окружения настроены правильно
2. Выполните сборку проекта:
```bash
npm run build
```

### Развертывание на сервере

1. Скопируйте содержимое директории `dist/` на ваш веб-сервер
2. Настройте ваш веб-сервер для обработки SPA роутинга
3. Запустите серверную часть:
```bash
npm run server
```

## Устранение неполадок

### Проблемы с подключением к Supabase
- Проверьте правильность URL и ключа в файле `.env`
- Убедитесь, что у вас есть доступ к проекту в Supabase

### Проблемы с Яндекс.Музыкой
- Проверьте валидность токена
- Убедитесь, что доступен в вашей стране

### Проблемы с Spotify
- Проверьте валидность client_id и client_secret
- Убедитесь, что доступен в вашей стране

### Проблемы с SounCloud
- Проверьте валидность client_id и client_secret
- Убедитесь, что доступен в вашей стране

### Проблемы с запуском
- Убедитесь, что все зависимости установлены
- Проверьте версию Node.js (должна быть 18 или выше)
- Очистите кэш npm: `npm cache clean --force`

## Вклад в проект

1. Форкните репозиторий
2. Создайте ветку для ваших изменений
3. Внесите изменения
4. Создайте pull request